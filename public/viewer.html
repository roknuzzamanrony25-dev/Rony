<!DOCTYPE html>
<html>
<head><title>Monitor</title><style>body{background:#111;text-align:center;}video{width:90%;max-width:700px;margin-top:50px;border:2px solid #333;border-radius:10px;}</style></head>
<body>
    <video id="v" autoplay playsinline controls></video>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const pc = new RTCPeerConnection({ iceServers: [{ urls: "stun:stun.l.google.com:19302" }] });
        
        socket.on("offer", async (o) => {
            await pc.setRemoteDescription(new RTCSessionDescription(o));
            const a = await pc.createAnswer();
            await pc.setLocalDescription(a);
            socket.emit("answer", a);
        });

        socket.on("ice", c => pc.addIceCandidate(new RTCIceCandidate(c)));
        pc.onicecandidate = e => e.candidate && socket.emit("ice", e.candidate);
        pc.ontrack = e => document.getElementById("v").srcObject = e.streams[0];
    </script>
</body>
</html>
